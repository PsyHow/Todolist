(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{143:function(t,e,n){},144:function(t,e,n){},173:function(t,e,n){"use strict";n.r(e);var a,i,c=n(0),s=n.n(c),o=n(37),d=n.n(o),r=(n(143),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,249)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),c(t),s(t)}))}),l=(n(144),n(241)),u=n(242),j=n(239),b=n(240),f=n(237),O=n(243),p=n(229),h=n(18),m=n(238),x=n(14),g=n(230),C=n(224),v=n(1),y=s.a.memo((function(t){var e=Object(c.useState)(""),n=Object(x.a)(e,2),a=n[0],i=n[1],s=Object(c.useState)(null),o=Object(x.a)(s,2),d=o[0],r=o[1],l=function(){""!==a.trim()?(t.addItem(a),i("")):r("Title is required")};return Object(v.jsxs)("div",{children:[Object(v.jsx)(g.a,{variant:"outlined",error:!!d,value:a,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){null!==d&&r(null),13===t.charCode&&l()},label:"Title",helperText:d,disabled:t.disabled}),Object(v.jsx)(j.a,{style:{marginTop:"6px"},color:"primary",onClick:l,disabled:t.disabled,children:Object(v.jsx)(C.a,{})})]})})),k=n(244),I=s.a.memo((function(t){var e=Object(c.useState)(!1),n=Object(x.a)(e,2),a=n[0],i=n[1],s=Object(c.useState)(t.value),o=Object(x.a)(s,2),d=o[0],r=o[1];return a?Object(v.jsx)(g.a,{value:d,onChange:function(t){r(t.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),t.onChange(d)},disabled:t.disabled}):Object(v.jsx)("span",{onDoubleClick:function(){i(!0),r(t.value)},children:t.value})})),A=n(232),w=n(226),T=n(25),S=n(117),L=n.n(S).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"b7b7629a-058d-4df6-866c-6165a8a8aade"}}),E=function(){return L.get("todo-lists")},F=function(t){return L.post("todo-lists",{title:t})},P=function(t){return L.delete("todo-lists/".concat(t))},D=function(t,e){return L.put("todo-lists/".concat(t),{title:e})},N=function(t){return L.get("todo-lists/".concat(t,"/tasks"))},z=function(t,e){return L.delete("todo-lists/".concat(t,"/tasks/").concat(e))},R=function(t,e){return L.post("todo-lists/".concat(t,"/tasks"),{title:e})},M=function(t,e,n){return L.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},U=function(t){return L.post("auth/login",t)},q=function(){return L.get("auth/me")},B=function(){return L.delete("auth/login")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(a||(a={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={}));var H=function(t,e){e(Q({error:t.message})),e(G({status:"failed"}))},Z=function(t,e){e.messages.length?t(Q({error:e.messages[0]})):t(Q({error:"Unknown error"})),t(G({status:"failed"}))},J=n(39),K=Object(J.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),_=K.reducer,V=K.actions.setIsLoggedInAC,Y=Object(J.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setIsInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),$=Y.actions,G=$.setAppStatusAC,Q=$.setAppErrorAC,W=$.setIsInitializedAC,X=Y.reducer,tt=Object(J.b)({name:"todolist",initialState:[],reducers:{removeTodolistAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));n>-1&&t.splice(n,1)},addTodolistAC:function(t,e){t.unshift(Object(T.a)(Object(T.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));n>-1&&(t[n].title=e.payload.title)},changeTodolistFilterAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));n>-1&&(t[n].filter=e.payload.filter)},getTodolistAC:function(t,e){return e.payload.todolist.map((function(t){return Object(T.a)(Object(T.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},changeTodolistEntityStatusAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));n>-1&&(t[n].entityStatus=e.payload.entityStatus)}}}),et=tt.actions,nt=et.changeTodolistEntityStatusAC,at=et.getTodolistAC,it=et.changeTodolistFilterAC,ct=et.changeTodolistTitleAC,st=et.addTodolistAC,ot=et.removeTodolistAC,dt=tt.reducer,rt=Object(J.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&n.splice(a,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTaskAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(n[a]=Object(T.a)(Object(T.a)({},n[a]),e.payload.model))},setTaskAC:function(t,e){t[e.payload.todolistID]=e.payload.tasks}},extraReducers:function(t){t.addCase(st,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(at,(function(t,e){e.payload.todolist.forEach((function(e){t[e.id]=[]}))})),t.addCase(ot,(function(t,e){delete t[e.payload.id]}))}}),lt=rt.actions,ut=lt.removeTaskAC,jt=lt.addTaskAC,bt=lt.updateTaskAC,ft=lt.setTaskAC,Ot=rt.reducer,pt=function(t,e,n){return function(i,c){var s=c().tasks[t].find((function(t){return t.id===e}));if(s){var o=Object(T.a)({title:s.title,status:s.status===a.New?a.Completed:a.New,deadline:s.deadline,startDate:s.startDate,priority:s.priority,description:s.description},n);i(G({status:"loading"})),M(t,e,o).then((function(a){0===a.data.resultCode?(i(G({status:"succeeded"})),i(bt({taskId:e,model:n,todolistId:t}))):Z(i,a.data)})).catch((function(t){H(t,i)}))}}},ht=s.a.memo((function(t){var e=Object(h.b)(),n=t.task,i=t.todolistId,s=t.entityStatus,o=Object(c.useCallback)((function(){e(function(t,e){return function(n){n(G({status:"loading"})),z(t,e).then((function(a){n(G({status:"succeeded"})),n(ut({taskId:e,todolistId:t}))})).catch((function(t){H(t,n)}))}}(i,n.id))}),[e,i,n.id]),d=Object(c.useCallback)((function(t){var c=t.currentTarget.checked;e(pt(i,n.id,{status:c?a.Completed:a.New}))}),[e,i,n.id]),r=Object(c.useCallback)((function(t){e(pt(i,n.id,{title:t}))}),[e,i,n.id]);return Object(v.jsxs)("div",{className:n.status===a.Completed?"is-done":"",children:[Object(v.jsx)(A.a,{checked:n.status===a.Completed,color:"primary",onChange:d}),Object(v.jsx)(I,{value:n.title,onChange:r,disabled:"loading"===s}),Object(v.jsx)(j.a,{onClick:o,children:Object(v.jsx)(w.a,{})})]},n.id)})),mt=s.a.memo((function(t){var e=t.todolist,n=Object(h.c)((function(t){return t.tasks[e.id]})),i=Object(h.b)();Object(c.useEffect)((function(){var t;i((t=e.id,function(e){e(G({status:"loading"})),N(t).then((function(n){e(G({status:"succeeded"}));var a=n.data.items;e(ft({todolistID:t,tasks:a}))})).catch((function(t){H(t,e)}))}))}),[i,e.id]);var s=Object(c.useCallback)((function(){var t;i((t=e.id,function(e){e(nt({entityStatus:"loading",id:t})),e(G({status:"loading"})),P(t).then((function(n){0===n.data.resultCode?(e(G({status:"succeeded"})),e(ot({id:t}))):Z(e,n.data)})).catch((function(t){H(t,e)}))}))}),[i,e.id]),o=Object(c.useCallback)((function(t){i(function(t,e){return function(n){n(G({status:"loading"})),R(t,e).then((function(t){0===t.data.resultCode?(n(G({status:"succeeded"})),n(jt({task:t.data.data.item}))):Z(n,t.data)})).catch((function(t){H(t,n)}))}}(e.id,t))}),[i,e.id]),d=Object(c.useCallback)((function(t){i(function(t,e){return function(n){n(G({status:"loading"})),D(t,e).then((function(a){n(G({status:"succeeded"})),n(ct({id:t,title:e}))})).catch((function(t){H(t,n)}))}}(e.id,t))}),[i,e.id]),r=Object(c.useCallback)((function(t,e){var n=it({id:e,filter:t});i(n)}),[i]),l=Object(c.useCallback)((function(){return r("all",e.id)}),[e.id,r]),u=Object(c.useCallback)((function(){return r("active",e.id)}),[e.id,r]),b=Object(c.useCallback)((function(){return r("completed",e.id)}),[e.id,r]),O=n;return"active"===e.filter&&(O=n.filter((function(t){return t.status===a.New}))),"completed"===e.filter&&(O=n.filter((function(t){return t.status===a.Completed}))),Object(v.jsxs)("div",{children:[Object(v.jsxs)("h3",{children:[Object(v.jsx)(I,{value:e.title,onChange:d,disabled:"loading"===e.entityStatus}),Object(v.jsx)(j.a,{onClick:s,disabled:"loading"===e.entityStatus,children:Object(v.jsx)(w.a,{})})]}),Object(v.jsx)(y,{addItem:o,disabled:"loading"===e.entityStatus}),Object(v.jsx)("div",{children:O.map((function(t){return Object(v.jsx)(ht,{task:t,todolistId:e.id,entityStatus:e.entityStatus},t.id)}))}),Object(v.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(v.jsx)(f.a,{variant:"all"===e.filter?"outlined":"text",onClick:l,color:"inherit",children:"All"}),Object(v.jsx)(f.a,{variant:"active"===e.filter?"outlined":"text",onClick:u,color:"primary",children:"Active"}),Object(v.jsx)(f.a,{variant:"completed"===e.filter?"outlined":"text",onClick:b,color:"secondary",children:"Completed"})]})]})})),xt=n(15),gt=function(){var t=Object(h.c)((function(t){return t.todolists})),e=Object(h.b)(),n=Object(h.c)((function(t){return t.auth.isLoggedIn}));Object(c.useEffect)((function(){n&&e((function(t){t(G({status:"loading"})),E().then((function(e){t(G({status:"succeeded"})),t(at({todolist:e.data}))})).catch((function(e){H(e,t)}))}))}),[e]);var a=Object(c.useCallback)((function(t){e(function(t){return function(e){e(G({status:"loading"})),F(t).then((function(t){0===t.data.resultCode?(e(G({status:"succeeded"})),e(st({todolist:t.data.data.item}))):Z(e,t.data)})).catch((function(t){H(t,e)}))}}(t))}),[e]);return n?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.a,{container:!0,style:{padding:"15px",justifyContent:"center"},children:Object(v.jsx)(y,{addItem:a})}),Object(v.jsx)(m.a,{container:!0,spacing:5,style:{justifyContent:"center"},children:t.map((function(t){return Object(v.jsx)(m.a,{item:!0,children:Object(v.jsx)(k.a,{style:{padding:"10px"},children:Object(v.jsx)(mt,{todolist:t})})},t.id)}))})]}):Object(v.jsx)(xt.a,{to:"/login"})},Ct=n(228),vt=n(247),yt=n(234),kt=n(233),It=s.a.forwardRef((function(t,e){return Object(v.jsx)(kt.a,Object(T.a)({elevation:6,ref:e,variant:"filled"},t))}));function At(){var t=Object(h.c)((function(t){return t.app.error})),e=Object(h.b)(),n=function(t,n){"clickaway"!==n&&e(Q({error:null}))};return Object(v.jsx)(yt.a,{open:null!==t,autoHideDuration:6e3,onClose:n,children:Object(v.jsx)(It,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})}var wt=n(235),Tt=n(246),St=n(245),Lt=n(222),Et=n(122),Ft=function(){var t=Object(h.b)(),e=Object(h.c)((function(t){return t.auth.isLoggedIn})),n=Object(Et.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<3&&(e.password="To short password"):e.password="Required",e},onSubmit:function(e){var a;n.resetForm(),t((a=e,function(t){t(G({status:"loading"})),U(a).then((function(e){0===e.data.resultCode?(t(G({status:"succeeded"})),t(V({value:!0}))):Z(t,e.data)})).catch((function(e){H(e,t)}))}))}});return e?Object(v.jsx)(xt.a,{to:"/"}):Object(v.jsx)(m.a,{container:!0,justifyContent:"center",children:Object(v.jsx)(m.a,{item:!0,justifyContent:"center",children:Object(v.jsxs)(wt.a,{children:[Object(v.jsxs)(Lt.a,{children:[Object(v.jsxs)("p",{children:["To log in get registered",Object(v.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(v.jsx)("p",{children:"or use common test account credentials:"}),Object(v.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(v.jsx)("p",{children:"Password: free"})]}),Object(v.jsx)("form",{onSubmit:n.handleSubmit,children:Object(v.jsxs)(St.a,{children:[Object(v.jsx)(g.a,Object(T.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?Object(v.jsx)("div",{style:{color:"red"},children:n.errors.email}):null,Object(v.jsx)(g.a,Object(T.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?Object(v.jsx)("div",{style:{color:"red"},children:n.errors.password}):null,Object(v.jsx)(Tt.a,{label:"Remember me",control:Object(v.jsx)(A.a,Object(T.a)({},n.getFieldProps("rememberMe")))}),Object(v.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})})})};var Pt=function(){var t=Object(h.c)((function(t){return t.app.status})),e=Object(h.c)((function(t){return t.app.isInitialized})),n=Object(h.c)((function(t){return t.auth.isLoggedIn})),a=Object(h.b)();return Object(c.useEffect)((function(){a((function(t){t(G({status:"loading"})),q().then((function(e){0===e.data.resultCode&&(t(G({status:"succeeded"})),t(V({value:!0})))})).finally((function(){t(G({status:"succeeded"})),t(W({isInitialized:!0}))}))}))}),[]),e?Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(At,{}),Object(v.jsxs)(l.a,{position:"static",children:[Object(v.jsxs)(u.a,{style:{justifyContent:"space-between"},children:[Object(v.jsx)(j.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(v.jsx)(p.a,{})}),Object(v.jsx)(b.a,{variant:"h6",children:"News"}),n&&Object(v.jsx)(f.a,{onClick:function(){a((function(t){t(G({status:"loading"})),B().then((function(e){0===e.data.resultCode?(t(V({value:!1})),t(G({status:"succeeded"}))):Z(t,e.data)})).catch((function(e){H(e,t)}))}))},color:"inherit",children:"Logout"})]}),"loading"===t&&Object(v.jsx)(vt.a,{})]}),Object(v.jsx)(O.a,{fixed:!0,children:Object(v.jsxs)(xt.d,{children:[Object(v.jsx)(xt.b,{path:"/",element:Object(v.jsx)(gt,{})}),Object(v.jsx)(xt.b,{path:"login",element:Object(v.jsx)(Ft,{})}),Object(v.jsx)(xt.b,{path:"404",element:Object(v.jsx)("h1",{style:{textAlign:"center"},children:" 404: Page not found"})}),Object(v.jsx)(xt.b,{path:"*",element:Object(v.jsx)(xt.a,{to:"/404"})})]})})]}):Object(v.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(v.jsx)(Ct.a,{})})},Dt=n(120),Nt=n(121),zt=Object(Dt.a)({tasks:Ot,todolists:dt,app:X,auth:_}),Rt=Object(J.a)({reducer:zt,middleware:function(t){return t().prepend(Nt.a)}});window.store=Rt;var Mt=n(63);d.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(h.a,{store:Rt,children:Object(v.jsx)(Mt.a,{children:Object(v.jsx)(Pt,{})})})}),document.getElementById("root")),r()}},[[173,1,2]]]);
//# sourceMappingURL=main.6b6f2db6.chunk.js.map